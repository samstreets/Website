<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Base64 Encoder/Decoder - Convert text and files to Base64 and back.">
    <meta property="og:title" content="Base64 Encoder/Decoder - Streets Services">
    <meta property="og:description" content="Convert text and files to Base64 and back instantly.">
    <meta property="og:image" content="https://streetsservices.co.uk/pictures/icon.png">
    <meta property="og:url" content="https://streetsservices.co.uk/pages/base64-tool.html">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <title>Base64 Encoder/Decoder - Streets Services</title>
    <link rel="icon" type="image/png" href="../pictures/icon.png">
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <img src="../pictures/icon.png" alt="Streets Services Icon" class="header-icon" width="28" height="28">
            <h1>Base64 Encoder/Decoder</h1>
        </div>
        <p class="tagline">Convert Text and Files to Base64</p>
    </header>

    <main class="container">
        <nav class="breadcrumb" aria-label="Breadcrumb"><a href="../index.html">Home</a> <span aria-hidden="true">‚Üí</span> <span id="breadcrumb-current"></span></nav>
        <a href="../index.html" class="back-link"><span aria-hidden="true">‚Üê</span><span>Back to Home</span></a>

        <section class="content-section">
            <div class="section-header" onclick="toggleSection('text-content')">
                <h2>Text Conversion</h2>
                <span class="toggle-icon" aria-hidden="true">‚ñº</span>
            </div>
            <div id="text-content" class="section-content active">
                <div class="calculator-container">
                    <div style="display:flex;gap:1rem;margin-bottom:1rem;justify-content:center;">
                        <button class="generator-button mode-btn active" data-mode="encode" style="max-width:150px;">Encode</button>
                        <button class="generator-button mode-btn" data-mode="decode" style="max-width:150px;">Decode</button>
                    </div>
                    <div style="margin-bottom:1.5rem;">
                        <label style="display:block;color:var(--accent-color);margin-bottom:0.5rem;font-weight:600;">Input</label>
                        <textarea id="input" placeholder="Enter text..." style="width:100%;min-height:150px;background:var(--bg-dark);color:var(--text-primary);border:2px solid var(--border-color);border-radius:var(--radius-sm);padding:1rem;font-family:'Courier New',monospace;resize:vertical;"></textarea>
                    </div>
                    <div style="margin-bottom:1.5rem;">
                        <label style="display:block;color:var(--accent-color);margin-bottom:0.5rem;font-weight:600;">Output</label>
                        <textarea id="output" placeholder="Result..." readonly style="width:100%;min-height:150px;background:var(--bg-card);color:var(--text-primary);border:2px solid var(--primary-color);border-radius:var(--radius-sm);padding:1rem;font-family:'Courier New',monospace;"></textarea>
                    </div>
                    <div style="display:flex;gap:1rem;flex-wrap:wrap;">
                        <button class="generator-button" onclick="convert()" style="flex:1;">Convert</button>
                        <button class="generator-button" onclick="copyOutput(this)" style="flex:1;">Copy Output</button>
                        <button class="generator-button" onclick="clearAll()" style="flex:1;">Clear</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="content-section">
            <div class="section-header" onclick="toggleSection('file-content')">
                <h2>File Conversion</h2>
                <span class="toggle-icon" aria-hidden="true">‚ñº</span>
            </div>
            <div id="file-content" class="section-content active">
                <div class="calculator-container">
                    <div id="fileUpload" onclick="document.getElementById('fileInput').click()" style="padding:2rem;border:2px dashed var(--border-color);border-radius:var(--radius-sm);text-align:center;cursor:pointer;margin-bottom:1.5rem;">
                        <input type="file" id="fileInput" onchange="handleFile(this.files[0])" style="display:none;">
                        <div style="color:var(--accent-color);font-size:2rem;">üìÅ</div>
                        <div style="color:var(--text-secondary);">Click or drag file here</div>
                    </div>
                    <textarea id="fileOutput" placeholder="File Base64..." readonly style="width:100%;min-height:150px;background:var(--bg-card);color:var(--text-primary);border:2px solid var(--primary-color);border-radius:var(--radius-sm);padding:1rem;font-family:'Courier New',monospace;margin-bottom:1rem;"></textarea>
                    <div style="display:flex;gap:1rem;">
                        <button class="generator-button" onclick="copyFileOutput(this)" style="flex:1;">Copy</button>
                        <button class="generator-button" onclick="downloadBase64()" style="flex:1;">Download</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <p>&copy; 2026 Sam Streets. All rights reserved.</p>
    </footer>

    <script src="../app.js"></script>
    <script>
        let currentMode = 'encode';

        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentMode = this.dataset.mode;
            });
        });

        function convert() {
            const input  = document.getElementById('input').value;
            const output = document.getElementById('output');
            if (!input.trim()) { output.value = 'Enter text...'; return; }
            try {
                output.value = currentMode === 'encode'
                    ? btoa(unescape(encodeURIComponent(input)))
                    : decodeURIComponent(escape(atob(input)));
            } catch (e) {
                output.value = 'Error: Invalid input for ' + currentMode;
            }
        }

        function copyOutput(btn) {
            const output = document.getElementById('output');
            if (!output.value) return;
            navigator.clipboard.writeText(output.value);
            btn.textContent = '‚úì Copied';
            setTimeout(() => btn.textContent = 'Copy Output', 2000);
        }

        function clearAll() {
            document.getElementById('input').value  = '';
            document.getElementById('output').value = '';
        }

        document.getElementById('input').addEventListener('input', () => {
            if (document.getElementById('input').value) convert();
        });

        function handleFile(file) {
            if (!file) return;
            const reader = new FileReader();
            reader.onload = e => document.getElementById('fileOutput').value = e.target.result;
            reader.readAsDataURL(file);
        }

        function copyFileOutput(btn) {
            const output = document.getElementById('fileOutput');
            if (!output.value) return;
            navigator.clipboard.writeText(output.value);
            btn.textContent = '‚úì Copied';
            setTimeout(() => btn.textContent = 'Copy', 2000);
        }

        function downloadBase64() {
            const output = document.getElementById('fileOutput').value;
            if (!output) return;
            const a = document.createElement('a');
            a.href     = 'data:text/plain;charset=utf-8,' + encodeURIComponent(output);
            a.download = 'base64.txt';
            a.click();
        }

        // Drag-and-drop support
        const dropZone = document.getElementById('fileUpload');
        dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.style.borderColor = 'var(--primary-color)'; });
        dropZone.addEventListener('dragleave', () => { dropZone.style.borderColor = 'var(--border-color)'; });
        dropZone.addEventListener('drop', e => {
            e.preventDefault();
            dropZone.style.borderColor = 'var(--border-color)';
            if (e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]);
        });
    </script>
</body>
</html>