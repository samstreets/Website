<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Generate QR codes for URLs, text, WiFi networks, and more with customizable options.">
    <title>QR Code Generator - Streets Services</title>
    <link rel="icon" type="image/png" href="pictures/icon.png">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        .mode-selector {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            background: var(--bg-dark);
            padding: 0.5rem;
            border-radius: var(--radius-lg);
        }

        .mode-btn {
            flex: 1;
            padding: 1rem;
            background: transparent;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            color: var(--text-secondary);
            font-family: var(--font-family);
            font-weight: 600;
            font-size: var(--font-size-base);
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            border-color: var(--primary-color);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .mode-btn:not(.active):hover {
            border-color: var(--primary-color);
            background: var(--bg-hover);
        }

        .mode-content {
            display: none;
        }

        .mode-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .color-input-wrapper {
            position: relative;
        }

        .color-input-wrapper input[type="color"] {
            width: 100%;
            height: 50px;
            border: none;
            cursor: pointer;
        }

        .qr-display {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-lg);
            text-align: center;
            margin: 2rem 0;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--border-color);
        }

        .qr-display canvas {
            max-width: 100%;
            height: auto;
        }

        .qr-placeholder {
            color: var(--text-secondary);
            font-size: var(--font-size-lg);
        }

        .result-section {
            display: none;
        }

        .result-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .download-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-base);
            font-weight: 600;
            font-size: var(--font-size-base);
            flex: 1;
        }

        .download-btn:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        input[type="text"]:disabled,
        input[type="password"]:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .preview-info {
            text-align: center;
            margin-top: 1rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        @media (max-width: 768px) {
            .mode-selector {
                flex-direction: column;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-content">
            <img src="pictures/icon.png" alt="Streets Services Icon" class="header-icon" width="40" height="40">
            <h1>QR Code Generator</h1>
        </div>
        <p class="tagline">Create Custom QR Codes Instantly</p>
    </header>

    <!-- Main Content -->
    <main class="container">
        <a href="index.html" class="back-link">
            <span aria-hidden="true">‚Üê</span>
            <span>Back to Home</span>
        </a>

        <!-- Generator Section -->
        <section class="content-section">
            <div class="section-header" onclick="toggleSection('generator-content')">
                <h2>Generator</h2>
                <span class="toggle-icon" aria-hidden="true">‚ñº</span>
            </div>
            <div id="generator-content" class="section-content active">
                <div class="calculator-container">
                    <!-- Mode Selector -->
                    <div class="mode-selector">
                        <button class="mode-btn active" onclick="switchMode('text')">üìù Text / URL</button>
                        <button class="mode-btn" onclick="switchMode('wifi')">üì∂ WiFi Network</button>
                    </div>

                    <!-- Text/URL Mode -->
                    <div id="text-mode" class="mode-content active">
                        <div class="form-group">
                            <label for="text-input">Enter Text or URL</label>
                            <input 
                                type="text" 
                                id="text-input" 
                                placeholder="https://example.com or any text..."
                                autocomplete="off"
                            >
                        </div>
                    </div>

                    <!-- WiFi Mode -->
                    <div id="wifi-mode" class="mode-content">
                        <div class="form-group">
                            <label for="wifi-ssid">Network Name (SSID)</label>
                            <input 
                                type="text" 
                                id="wifi-ssid" 
                                placeholder="MyWiFiNetwork"
                                autocomplete="off"
                            >
                        </div>

                        <div class="form-group">
                            <label for="wifi-password">Password</label>
                            <input 
                                type="text" 
                                id="wifi-password" 
                                placeholder="Enter WiFi password"
                                autocomplete="off"
                            >
                        </div>

                        <div class="options-grid">
                            <div class="form-group">
                                <label for="wifi-security">Security Type</label>
                                <select id="wifi-security" class="cidr-select">
                                    <option value="WPA">WPA/WPA2</option>
                                    <option value="WEP">WEP</option>
                                    <option value="nopass">No Password</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="wifi-hidden">Network Visibility</label>
                                <select id="wifi-hidden" class="cidr-select">
                                    <option value="false">Visible</option>
                                    <option value="true">Hidden</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- QR Code Options -->
                    <div class="options-grid">
                        <div class="form-group">
                            <label for="size-input">Size (pixels)</label>
                            <select id="size-input" class="cidr-select">
                                <option value="128">128 x 128</option>
                                <option value="256" selected>256 x 256</option>
                                <option value="512">512 x 512</option>
                                <option value="1024">1024 x 1024</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="color-dark">QR Code Color</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-dark" value="#000000">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="color-light">Background Color</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-light" value="#ffffff">
                            </div>
                        </div>
                    </div>

                    <!-- Generate Button -->
                    <button class="calculate-button" onclick="generateQR()" style="margin-top: 2rem;">
                        üî≤ Generate QR Code
                    </button>

                    <!-- Result Section -->
                    <div id="result-section" class="result-section">
                        <div class="qr-display" id="qr-display">
                            <div id="qrcode"></div>
                        </div>
                        <div class="preview-info" id="preview-info"></div>
                        <div class="button-group">
                            <button class="download-btn" onclick="downloadQR()">
                                üíæ Download QR Code
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Usage Guide -->
        <section class="content-section">
            <div class="section-header" onclick="toggleSection('guide-content')">
                <h2>How to Use</h2>
                <span class="toggle-icon" aria-hidden="true">‚ñº</span>
            </div>
            <div id="guide-content" class="section-content active">
                <div class="info-cards">
                    <article class="info-card">
                        <h3>üìù Text & URLs</h3>
                        <p>
                            Create QR codes for any text or website URL. Perfect for sharing links, contact 
                            information, or messages. Simply paste your URL or type your text and generate.
                        </p>
                    </article>

                    <article class="info-card">
                        <h3>üì∂ WiFi Networks</h3>
                        <p>
                            Share WiFi credentials easily. Enter your network name and password, select the 
                            security type, and generate a QR code that others can scan to connect automatically.
                        </p>
                    </article>

                    <article class="info-card">
                        <h3>üé® Customization</h3>
                        <p>
                            Customize your QR code with different sizes and colors. Change the QR code color 
                            and background to match your branding or preferences. Higher sizes provide better 
                            scanning at larger distances.
                        </p>
                    </article>

                    <article class="info-card">
                        <h3>üíæ Download & Share</h3>
                        <p>
                            Download your generated QR code as a PNG image. Use it in presentations, print 
                            materials, websites, or anywhere you need quick access to information via scanning.
                        </p>
                    </article>
                </div>
            </div>
        </section>

        <!-- QR Code Info -->
        <section class="content-section">
            <div class="section-header" onclick="toggleSection('info-content')">
                <h2>About QR Codes</h2>
                <span class="toggle-icon" aria-hidden="true">‚ñº</span>
            </div>
            <div id="info-content" class="section-content">
                <div class="info-cards">
                    <article class="info-card">
                        <h3>üì± What are QR Codes?</h3>
                        <p>
                            QR (Quick Response) codes are 2D barcodes that can store various types of data. 
                            They're readable by smartphone cameras and dedicated QR scanners, making them 
                            perfect for quick information sharing.
                        </p>
                    </article>

                    <article class="info-card">
                        <h3>üéØ Common Uses</h3>
                        <p>
                            QR codes are used for website links, contact details (vCards), WiFi credentials, 
                            payment information, product tracking, event tickets, and much more. They bridge 
                            the physical and digital worlds seamlessly.
                        </p>
                    </article>

                    <article class="info-card">
                        <h3>üîí Security Tips</h3>
                        <p>
                            Always verify the source before scanning QR codes. Be cautious of codes in public 
                            places that could link to malicious websites. For WiFi QR codes, only share with 
                            trusted individuals.
                        </p>
                    </article>

                    <article class="info-card">
                        <h3>‚ú® Best Practices</h3>
                        <p>
                            Use high-contrast colors for better scanning. Test your QR code before sharing. 
                            For print materials, ensure the code is large enough to scan easily. Leave adequate 
                            white space around the QR code.
                        </p>
                    </article>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <p>&copy; 2024 Sam Streets. All rights reserved.</p>
    </footer>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        let qrCodeInstance = null;
        let currentMode = 'text';

        function switchMode(mode) {
            currentMode = mode;
            
            // Update mode buttons
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update mode content
            document.querySelectorAll('.mode-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(mode + '-mode').classList.add('active');

            // Hide result section when switching modes
            document.getElementById('result-section').classList.remove('active');
        }

        function generateQR() {
            let text = '';
            let infoText = '';

            if (currentMode === 'text') {
                text = document.getElementById('text-input').value.trim();
                if (!text) {
                    alert('Please enter some text or a URL');
                    return;
                }
                infoText = text.length > 50 ? text.substring(0, 47) + '...' : text;
            } else if (currentMode === 'wifi') {
                const ssid = document.getElementById('wifi-ssid').value.trim();
                const password = document.getElementById('wifi-password').value;
                const security = document.getElementById('wifi-security').value;
                const hidden = document.getElementById('wifi-hidden').value;

                if (!ssid) {
                    alert('Please enter a network name (SSID)');
                    return;
                }

                // Check if password is required
                if (security !== 'nopass' && !password) {
                    alert('Please enter a password for secured network');
                    return;
                }

                // Format WiFi QR code string
                text = `WIFI:T:${security};S:${escapeWifiString(ssid)};P:${escapeWifiString(password)};H:${hidden};;`;
                infoText = `WiFi Network: ${ssid}`;
            }

            const size = parseInt(document.getElementById('size-input').value);
            const colorDark = document.getElementById('color-dark').value;
            const colorLight = document.getElementById('color-light').value;

            // Clear previous QR code
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = '';

            // Generate new QR code
            qrCodeInstance = new QRCode(qrContainer, {
                text: text,
                width: size,
                height: size,
                colorDark: colorDark,
                colorLight: colorLight,
                correctLevel: QRCode.CorrectLevel.H
            });

            // Update preview info
            document.getElementById('preview-info').textContent = infoText;

            // Show result section with animation
            const resultSection = document.getElementById('result-section');
            resultSection.classList.add('active');

            // Scroll to result
            setTimeout(() => {
                resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        function escapeWifiString(str) {
            // Escape special characters for WiFi QR code format
            return str.replace(/([\\";,:])/g, '\\$1');
        }

        function downloadQR() {
            const canvas = document.querySelector('#qrcode canvas');
            if (canvas) {
                const url = canvas.toDataURL('image/png');
                const link = document.createElement('a');
                const timestamp = new Date().toISOString().split('T')[0];
                const filename = currentMode === 'wifi' 
                    ? `wifi-qrcode-${timestamp}.png` 
                    : `qrcode-${timestamp}.png`;
                link.download = filename;
                link.href = url;
                link.click();
            }
        }

        // Allow Enter key to generate
        document.getElementById('text-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generateQR();
            }
        });

        document.getElementById('wifi-ssid').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generateQR();
            }
        });

        document.getElementById('wifi-password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generateQR();
            }
        });

        // Auto-disable password field when "No Password" is selected
        document.getElementById('wifi-security').addEventListener('change', function(e) {
            const passwordField = document.getElementById('wifi-password');
            if (e.target.value === 'nopass') {
                passwordField.disabled = true;
                passwordField.value = '';
            } else {
                passwordField.disabled = false;
            }
        });
    </script>
</body>
</html>
